# Project Scan Report (Task A)

Date: 2025-01-27

Scope:

- App routes: `src/app/**`
- Navigation: `src/components/layout/{header,footer}.tsx`
- Motion components: `src/components/**`, pages using `framer-motion`
- Language switcher: `src/components/language-switcher.tsx`
- Cart store: `src/lib/store/cart.ts`
- API routes: `src/app/api/**`

## Detected Routes (App Router)

- / (src/app/page.tsx)
- /products (src/app/products/page.tsx)
- /cart (src/app/cart/page.tsx)
- /checkout (src/app/checkout/page.tsx)
- /checkout/success (src/app/checkout/success/page.tsx)
- /orders (src/app/orders/page.tsx)
- /auth/signin (src/app/auth/signin/page.tsx)
- /auth/signup (src/app/auth/signup/page.tsx)
- /admin/dashboard (src/app/admin/dashboard/page.tsx)
- /vendor/dashboard (src/app/vendor/dashboard/page.tsx)

API:

- /api/auth/[...nextauth]
- /api/auth/register
- /api/products (GET/POST)
- /api/products/[id] (GET/PUT/DELETE)
- /api/orders (GET/POST)
- /api/orders/[id] (GET/PATCH)
- /api/upload (POST)
- /api/payments/chapa (+ webhook)
- /api/payments/stripe (+ webhook)

Missing routes referenced by UI (will 404):

- /categories (Header)
- /vendors (Header)
- /about (Footer)
- /contact (Footer)
- /help (Footer)
- /shipping (Footer)
- /returns (Footer)

## Components Using Framer Motion

- src/app/page.tsx (Home)
- src/app/products/page.tsx
- src/app/cart/page.tsx
- src/app/admin/dashboard/page.tsx
- src/app/vendor/dashboard/page.tsx
- src/components/sections/{hero-section,features-section}.tsx
- src/components/ui/{animated-card,animated-button}.tsx

All above are client components (contain "use client").

## Language Switcher

- src/components/language-switcher.tsx
  - Status: Updated to client-only mounted pattern. Exports default component; imports must use default.

## Cart Store

- src/lib/store/cart.ts
  - Provides: items, addItem, removeItem, updateQuantity, clearCart, getTotalItems, getTotalPrice, currency/setCurrency.
  - Persistence: Not verified; likely missing localStorage rehydration.

## Broken Links / Missing Handlers

- Header

  - Links: `/categories`, `/vendors` â†’ no pages exist (404).
  - Search input: no submit handler; Enter does nothing.

- Footer

  - Multiple links to non-existent routes: `/about`, `/contact`, `/help`, `/shipping`, `/returns`.
  - Social links use `href="#"` (OK placeholder but non-functional).

- Products Page
  - Uses mock data; no `Add to Cart` flow wired (buttons present but not calling store).
  - No product detail route `/products/[id]` implemented; Eye/Name link does not navigate to detail.

## Client/Server Mismatch Risks

- i18n

  - `src/lib/i18n.ts` initializes client-side only (guarded by `typeof window !== "undefined"`), OK.
  - `language-switcher` now mounted-gated to avoid hydration mismatch.

- Layout

  - `src/app/layout.tsx` now uses `suppressHydrationWarning` on `<html>` and `<body>`; classes are static; OK.

- Home
  - Uses `export const dynamic = 'force-dynamic'` to avoid i18n SSR mismatch; OK.

## Proposed Fixes (Summary)

1. Create minimal pages returning 200 for the following routes to avoid 404s:
   - `/categories`, `/vendors`, `/about`, `/contact`, `/help`, `/shipping`, `/returns`.
2. Header search: add form submit handler to route to `/products?search=...` using `useRouter().push`.
3. Products page:
   - Add "Add to Cart" button calling `useCartStore().addItem` with product snapshot.
   - Link product card to a new `/products/[id]` detail page; implement detail page to fetch `/api/products/[id]` and show spinner.
   - Add image fallback when `Image` fails.
4. Cart store: add localStorage persistence and rehydrate on load.
5. i18n: ensure language preference persists (localStorage) in `language-switcher`.
6. Accessibility: add `alt` text to images where missing; ensure buttons have `aria-label`s.

## Files to Avoid Auto-Editing (Safety)

- prisma/schema.prisma and migrations (read-only)
- src/app/api/payments/\*\* (read-only)
- src/app/api/auth/\*\* core config (read-only; can consume)
- .env and secrets (read-only)

---

Generated by automated scan. Next steps: implement Task B fixes in small, isolated commits with updates to `UI-UPDATE.md`.
